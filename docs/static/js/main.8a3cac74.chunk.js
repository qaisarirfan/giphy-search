(this["webpackJsonpgiphy-search-web"]=this["webpackJsonpgiphy-search-web"]||[]).push([[0],{10:function(e,t,n){e.exports={masonry:"Items_masonry__YfTJV",masonryBrick:"Items_masonryBrick__3N9ft",popup:"Items_popup__3cefG",close:"Items_close__3O3HU",content:"Items_content__IIR1z",layer:"Items_layer__1f4c3"}},20:function(e,t,n){e.exports={inputWrapper:"Search_inputWrapper__-SG6E",input:"Search_input__yx45c",button:"Search_button__dnbUm"}},31:function(e){e.exports=JSON.parse('{"a":"giphy-search-web"}')},44:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(1),r=n.n(a),i=n(17),s=n.n(i),o=n(7),u=n(16),l=(n(44),n(13)),d=n(30),j=n.n(d),b=function(e){return e.entities},p=function(e){return e.loading},O=function(e){return e.currentPage},v=function(e){return e.error},f=n(10),h=n.n(f),g=function(){var e={id:"",title:"",preview:"",img:""},t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(e),l=Object(u.a)(s,2),d=l[0],j=l[1],p=Object(o.c)(b),O=p.ids,v=p.data,f=function(){i(!1),j(e)};Object(a.useEffect)((function(){window.addEventListener("keydown",(function(e){"Escape"===e.key&&f()}))}),[]);var g=O.map((function(e){var t=v[e].img;return Object(c.jsx)("button",{type:"button",className:h.a.masonryBrick,onClick:function(){return function(e){i(!0),j(v[e])}(e)},children:Object(c.jsx)("span",{style:{backgroundImage:"url(".concat(t,")")}})},e)}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:h.a.masonry,children:g}),r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:h.a.layer}),Object(c.jsxs)("div",{className:h.a.popup,children:[Object(c.jsx)("button",{type:"button",className:h.a.close,onClick:f,children:"\xd7"}),d.preview&&Object(c.jsxs)("div",{className:h.a.content,children:[d.title&&Object(c.jsx)("h3",{children:d.title}),Object(c.jsx)("img",{src:d.preview,alt:""})]})]})]}):null]})},m=function(){return Object(o.c)(p)?Object(c.jsx)("div",{style:{textAlign:"center"},children:Object(c.jsx)("p",{children:"Loading..."})}):null},x=n(20),y=n.n(x),_=function(e){var t=e.setValue,n=e.onSubmit,a=e.val;return Object(c.jsxs)("div",{className:y.a.inputWrapper,children:[Object(c.jsx)("input",{type:"text",placeholder:"",onChange:function(e){var n=e.target.value;return t(n)},value:a,name:"search",className:y.a.input,onKeyDown:function(e){"Enter"===e.key&&n()}}),Object(c.jsx)("button",{className:y.a.button,type:"button",onClick:function(){return n()},children:"Search"})]})},w=function(){var e=Object(o.c)(v);return e?Object(c.jsx)("div",{style:{textAlign:"center"},children:Object(c.jsx)("p",{children:e})}):null},k=n(31),S=function(e,t){return"app/".concat(k.a,"/").concat(e,"/").concat(t)},E="search",N=S(E,"GET"),C=S(E,"RECEIVED"),I=S(E,"ERROR"),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:N,payload:{query:e,newSearch:t}}};var V=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],i=t[1],s=Object(o.b)(),d=r.a.useCallback((function(e,t){return s(F(e,t))}),[s]);return Object(a.useEffect)((function(){d(n,!1)}),[]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(_,{setValue:i,onSubmit:function(){d(n,!0)},val:n}),Object(c.jsxs)(j.a,{className:"PerfectScrollbar",onYReachEnd:Object(l.throttle)((function(){d(n,!1)}),1500),children:[Object(c.jsx)(g,{}),Object(c.jsx)(m,{}),Object(c.jsx)(w,{})]})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},R=n(9),B=n(34),L=n(32),q=n(6),A={loading:!1,entities:{ids:[],data:{}},currentPage:-25,error:""},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(q.a)(Object(q.a)({},e),{},{loading:!0,error:""});case C:return Object(q.a)(Object(q.a)(Object(q.a)({},e),t.payload),{},{loading:!1,error:""});case I:return Object(q.a)(Object(q.a)({},e),{},{loading:!1,error:t.payload});default:return e}},T=n(11),W=n.n(T),D=n(14),G=n(12),z=n(33),H=n.n(z),K=W.a.mark(M),U=W.a.mark(X),Y=W.a.mark(Z);function M(e){var t,n,c,a,r,i,s,o,u,d,j,p;return W.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t="v0zFcKCW00lCoAVsC1mVdXpLm8VcmHdZ",n=e.payload,c=n.query,a=n.newSearch,v.next=4,Object(G.c)(b);case 4:return r=v.sent,v.next=7,Object(G.c)(O);case 7:return i=v.sent,s=H.a.stringify({api_key:t,q:c||"city",limit:25,offset:a?0:i+25,rating:"g",lang:"en"}),v.prev=9,v.next=12,fetch("https://api.giphy.com/v1/gifs/search?".concat(s)).then((function(e){return e.json()}));case 12:return o=v.sent,u=Object(l.get)(o,"pagination.offset",0),d=Object.values(o.data).reduce((function(e,t){var n,c,a,r;return e.ids=[].concat(Object(D.a)(e.ids||[]),[t.id]),Object(l.set)(e,"data[".concat(t.id,"]"),{id:null===t||void 0===t?void 0:t.id,title:null===t||void 0===t?void 0:t.title,img:null===t||void 0===t||null===(n=t.images)||void 0===n||null===(c=n.preview_gif)||void 0===c?void 0:c.url,preview:null===t||void 0===t||null===(a=t.images)||void 0===a||null===(r=a.original)||void 0===r?void 0:r.url}),e}),{}),j=Object(D.a)(Object(l.uniq)([].concat(Object(D.a)(r.ids),Object(D.a)(null===d||void 0===d?void 0:d.ids)))),p=Object(q.a)(Object(q.a)({},r.data),null===d||void 0===d?void 0:d.data),a&&(j=Object(D.a)(null===d||void 0===d?void 0:d.ids),p=Object(q.a)({},null===d||void 0===d?void 0:d.data)),v.next=20,Object(G.b)({type:C,payload:{entities:{ids:j,data:p},currentPage:u}});case 20:v.next=26;break;case 22:return v.prev=22,v.t0=v.catch(9),v.next=26,Object(G.b)({type:I,payload:v.t0.message});case 26:case"end":return v.stop()}}),K,null,[[9,22]])}function X(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.d)(N,M);case 2:case"end":return e.stop()}}),U)}function Z(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.a)([X()]);case 2:case"end":return e.stop()}}),Y)}var Q=Object(B.a)(),$=Object(R.d)(J,Object(R.a)(Q,L.logger));Q.run(Z);var ee=$;n(51),n(53),n(54);s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(o.a,{store:ee,children:Object(c.jsx)(V,{})})}),document.getElementById("root")),P()}},[[55,1,2]]]);
//# sourceMappingURL=main.8a3cac74.chunk.js.map